;---------------------------------------APAGE    = $AABPAGE    = APAGE+2;---------------------------------------         ; сетуп         LDA #$20         STA FXBYTE3FXWAIT   JMP FXWAIT;---------------------------------------         ; иряFXBYTE3  LDA DOPAGE         ;FXBYTE1  LDA COLSOFFFXBYTE2  LDA COLSON         ;         LDA #$01         STA $D019         JMP $EA31;---------------------------------------         ; роутинесCOLSOFF  LDY #$00A3203    = *+1         LDX #$30I3204    LDA COLORTAB,X         STA $D800+(40*12),Y         STA $D800+(40*18),Y         STA $D800+(40*19),Y         STA $D800+(40*24),Y         LDA COLORTAB+1,X         STA $D800+(40*7),Y         STA $D800+(40*11),Y         STA $D800+(40*13),Y         STA $D800+(40*17),Y         STA $D800+(40*21),Y         STA $D800+(40*23),Y         LDA COLORTAB+2,X         STA $D800+(40*8),Y         STA $D800+(40*10),Y         STA $D800+(40*14),Y         STA $D800+(40*16),Y         STA $D800+(40*20),Y         STA $D800+(40*22),Y         LDA COLORTAB+3,X         STA $D800+(40*9),Y         STA $D800+(40*15),Y         STA $D800+(40*21),Y         INY         INX         CPY #$14         BNE I3204         INC A3203         LDA A3203         CMP #$4C         BEQ I3270         CMP #$7E         BEQ I3265         JMP I32D2I3265    LDA #$AD         STA FXBYTE1         STA FXBYTE2         STA FXWAIT         RTSI3270    LDA #$AD         STA FXBYTE1         STA FXBYTE2         LDA #$20         STA FXBYTE3         RTS;---------------------------------------COLSONA3280    LDY #$14A3283    = *+1         LDX #$91I3284    LDA COLORTAB,X         STA $D800+(40*12),Y         STA $D800+(40*18),Y         STA $D800+(40*19),Y         STA $D800+(40*24),Y         LDA COLORTAB+1,X         STA $D800+(40*7),Y         STA $D800+(40*11),Y         STA $D800+(40*13),Y         STA $D800+(40*17),Y         STA $D800+(40*21),Y         STA $D800+(40*23),Y         LDA COLORTAB+2,X         STA $D800+(40*8),Y         STA $D800+(40*10),Y         STA $D800+(40*14),Y         STA $D800+(40*16),Y         STA $D800+(40*20),Y         STA $D800+(40*22),Y         LDA COLORTAB+3,X         STA $D800+(40*9),Y         STA $D800+(40*15),Y         STA $D800+(40*21),Y         INY         DEX         CPY #$28         BNE I3284         INC A3283         RTSI32D2    LDA A3203         CLC         ADC #$13         STA A3283         RTS;---------------------------------------DOPAGE   LDA LINENO         CMP #17         BEQ DOPAGE2         JSR NEXTLINE         RTSDOPAGE2  LDA #$00         STA LINENO         LDA #$AD         STA FXBYTE3         LDA #$20         STA FXBYTE1         STA FXBYTE2         RTS;---------------------------------------SETPAGE  LDX PAGENO         LDA #$00         STA LINENO         STA APAGE         LDA PAGEHI,X         STA APAGE+1         LDA #<$0400+(40*7)         STA BPAGE         LDA #>$0400+(40*7)         STA BPAGE+1         RTS;---------------------------------------NEXTLINE LDY #$00NEXTL1   LDA (APAGE),Y         STA (BPAGE),Y         INY         CPY #40         BNE NEXTL1         LDA APAGE         CLC         ADC #40         STA APAGE         LDA APAGE+1         ADC #$00         STA APAGE+1         LDA BPAGE         CLC         ADC #40         STA BPAGE         LDA BPAGE+1         ADC #$00         STA BPAGE+1         INC LINENO         RTS;---------------------------------------PAGENO   .BYTE $00PAGEMAX  .BYTE $00LINENO   .BYTE $00         ;PAGEHI   .BYTE $28,$2B,$2E,$31,$34,$37         .BYTE $3A,$3D,$40,$43,$46,$49         .BYTE $4C,$4F,$52,$55,$58,$5B         .BYTE $5E,$61,$64,$67,$6A,$6D         .BYTE $70,$73,$76,$79,$7C,$7F         .BYTE $82,$85,$88,$8C         ;COLORTAB .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $07,$0F,$0A,$04,$02,$06         .BYTE $00,$00,$00,$00,$00,$00         .BYTE $00,$00,$00,$00,$00,$00         .BYTE $00,$00,$00,$00,$00,$00         .BYTE $00,$00,$00,$00,$00,$00         .BYTE $00,$00,$00,$00,$00,$00         .BYTE $00,$00,$00,$00,$00,$00         .BYTE $00,$00,$00,$00,$09,$08         .BYTE $09,$02,$08,$0A,$0F,$07         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01         .BYTE $01,$01,$01,$01,$01,$01;---------------------------------------